window.layer_poped=false;(function($){$._58common={subform:function(fi,i,v){var f=$("#"+fi).get(0);if(!f.onsubmit||f.onsubmit()!=false){if(i){$("#"+i).val(v)}var emai=document.getElementById("txtemail");var codes=document.getElementById("validatecode");if(this.IsMailValidate(emai)&&this.checkAuthInputforLogin(codes)){f.submit()}}},keydownsend:function(evt){evt=evt?evt:window.event?window.event:"";keyCode=evt.keyCode?evt.keyCode:evt.which?evt.which:evt.charCode;if(keyCode==13){$("#submitForm").submit()}},ResumeSpecialRefresh:function(obj,ids,states,types){var infos="";if(types=="refresh"){infos="简历刷新"}if(types=="delete"){infos="简历删除";$(obj).parents(".delconfirm").hide();layer_poped=false}if(types=="state"){infos="更改简历状态";var rstate="公开";if(states=="0")rstate="关闭";if(!window.confirm("您确定要"+rstate+"简历状态吗？")){return}}$.ajax({type:"post",dataType:"html",url:"http://jianli.58.com/ajax/action_ajaxresume/?id="+ids+"&type="+types+"&openstate="+states+"&flag=true",success:function(data,textStatus){if(parseInt(data)==0){if(!layer_poped){var div=$(obj).parents("td").find("div[class^=ref]");div.find("span.fl").text(infos+"失败！");div.show();window.setTimeout(function(){div.hide()},1e3)}}else{if(parseInt(data)==1){setbg("简历刷新成功",600,200,"http://jianli.58.com/refreshresumesuccess.html");var today=new Date;var day=today.getDate();var month=today.getMonth()+1;var year=today.getYear();year=year<1900?1900+year:year;var date=year.toString()+"-"+month+"-"+day;var td=$(obj).parents("tr").find("td[id=updDate]");td.html(date)}else{if(!layer_poped){var div=$(obj).parents("td").find("div[class^=ref]");div.find("span.fl").text(infos+"成功！");div.show();window.setTimeout(function(){div.hide();if(types=="delete"&&top.location!=self.location){window.parent.location.reload()}else{location.href=location.href}},1e3)}}}}})},ResumeOperation:function(obj,ids,states,types){var infos="";if(types=="refresh"){infos="简历刷新"}if(types=="delete"){infos="简历删除";$(obj).parents(".delconfirm").hide();layer_poped=false}if(types=="state"){infos="更改简历状态";var rstate="公开";if(states=="0")rstate="关闭";if(!window.confirm("您确定要"+rstate+"简历状态吗？")){return}}$.ajax({type:"post",dataType:"html",url:"http://jianli.58.com/ajax/action_ajaxresume/?id="+ids+"&type="+types+"&openstate="+states,success:function(data,textStatus){if(parseInt(data)==0){if(!layer_poped){var div=$(obj).parents("td").find("div[class^=ref]");div.find("span.fl").text(infos+"失败！");div.show();window.setTimeout(function(){div.hide()},1e3)}}else{if(parseInt(data)==1){setbg("简历刷新成功",600,200,"http://jianli.58.com/refreshresumesuccess.html");var today=new Date;var day=today.getDate();var month=today.getMonth()+1;var year=today.getYear();year=year<1900?1900+year:year;var date=year.toString()+"-"+month+"-"+day;var td=$(obj).parents("tr").find("td[id=updDate]");td.html(date)}else{if(!layer_poped){var div=$(obj).parents("td").find("div[class^=ref]");div.find("span.fl").text(infos+"成功！");div.show();window.setTimeout(function(){div.hide();if(types=="delete"&&top.location!=self.location){window.parent.location.reload()}else{location.href=location.href}},1e3)}}}}})},IsMailValidate:function(obj){try{var txtMail=obj.value;var check=true;var re=/^[_\.0-9a-zA-Z-]+[0-9a-zA-Z]@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,3}$/;var emtip=document.getElementById("checkemail");var emails=txtMail.split(";");$(emails).each(function(i,n){if(n!=""&&!n.match(re)){check=false}});if(!check){emtip.style.display="block";return false}else{emtip.style.display="none";return true}}catch(e){return true}},IsOneMailValidate:function(obj){try{var txtMail=obj.value;var check=true;var re=/^[_\.0-9a-zA-Z-]+[0-9a-zA-Z]@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,3}$/;var emtip=document.getElementById("checkemail");if(txtMail!=""&&!txtMail.match(re)){emtip.style.display="block";return false}else{emtip.style.display="none";return true}}catch(e){return true}},checkAuthInputforLogin:function(thisinput){var re=/([a-zA-Z0-9]){5}/;var count=thisinput.value.length;var codetip=document.getElementById("checkcode");if(thisinput.value==""){codetip.style.display="block";return false}else if(!thisinput.value.match(re)||count!=5){codetip.style.display="block";return false}else{codetip.style.display="none";return true}},SelectAllCheckBox:function(obj){$("input[type=checkbox][^disabled]").attr("checked",obj?obj.checked:this.checked)}}})(jQuery);$(function(){$(".closeTips").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$(".posrlt .drtip").hover(function(){$(this).find(".drtpos").show();$(this).parent().css({"z-index":"2"})},function(){$(this).find(".drtpos").hide();$(this).parent().css({"z-index":"1"})});$("div.editIcon").click(function(){$(this).parent().addClass("onit");$(this).hide();$(this).siblings("div.rnedit").find('input[name="modifyNameInput"]').select()});$('input[name="modifyNameInput"]').bind("keydown",function(e){e=e||window.event;if(e.keyCode==13){$(this).blur()}}).bind("blur",function(){modifyResumeName(this)});function modifyResumeName(obj){var id=$(obj).attr("rid");var newName=$(obj).val();var nameLength=getContentLength(newName);if(nameLength<2||nameLength>12){$(obj).siblings("span").addClass("rnedit red");$(obj).siblings("span").text("2-12个字，只可输入汉字、字母、数字、（） “”");return false}var reg=/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[\w()\"（）“”])*$/;if(!reg.test(newName)){$(obj).siblings("span").addClass("rnedit red");$(obj).siblings("span").text("2-12个字，只可输入汉字、字母、数字、（） “”");return false}$.ajax({url:"http://jianli.58.com/ajax/action_ajaxresume",data:{id:id,newName:newName,type:"modifyName"},type:"post",dataType:"html",success:function(data){if(data==2){location.href=location.href}else if(data==1){$(obj).parents("div[class^=rsmname]").removeClass("onit");$(obj).parent().siblings("div.editIcon").show()}}})}function getContentLength(content){var len=0;for(var i=0;i<content.length;i++){if(content.charCodeAt(i)>=0&&content.charCodeAt(i)<=255){len=len+1}else{len=len+2}}return~~(len/2)}});var UrlUtility={DecordKey:function(v){if(v&&v!=""){return unescape(decodeURI(v))}return v},EncordKey:function(v){if(v&&v!=""){return encodeURI(escape(v))}return v},AddPara:function(url,name,value){if(url.toString().indexOf("?")>=0){var re=new RegExp("([&?])"+name+"=([^&?]*)","ig");return re.test(url)?url.replace(re,RegExp.$1+name+"="+value):url+"&"+name+"="+value}else{return url+"?"+name+"="+value}},AddKeyPara:function(url,value,key){if(!(key&&key!="")){key="key"}if(value&&value!=""){value=UrlUtility.EncordKey(value);return UrlUtility.AddPara(url,key,value)}else{return UrlUtility.DelPara(url,key)}},GetKeyPara:function(url,key){return UrlUtility.DecordKey(UrlUtility.GetParaValue(url,key))},DelPara:function(url,name){var re=new RegExp("([&?])"+name+"=([^&?]*)(&|$)","ig");if(re.test(url)){url=url.replace(re,RegExp.$1);if(url.indexOf("?")==url.length-1||url.charAt(url.length-1)=="&"){url=url.substring(0,url.length-1)}}return url},GetParaValue:function(url,name){var re=new RegExp("[&?]"+name+"=([^&?]*)","ig");return url.match(re)?url.match(re)[0].substr(name.length+2):""}};var xmlHttp=null;document.domain="58.com";function CreateXmlHttpRequest(){if(window.ActiveXObject){xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}else if(window.XMLHttpRequest){xmlHttp=new XMLHttpRequest}}function subformCopy(obj,callback,id,size){if(size==""||size>5){var div=$(obj).siblings("div[class^=limitWarn]");div.show();window.setTimeout(function(){div.hide()},2e3);return}CreateXmlHttpRequest();xmlHttp.onreadystatechange=callback;var xmlText='<?xml version="1.0" encoding="UTF-8"?>';xmlText+="<sendinfo>";xmlText+="<operate>resumecopy</operate>";xmlText+="<resumeid>"+id+"</resumeid>";xmlText+="</sendinfo>";url="http://jianli.58.com/ajax/addnewresume/";xmlHttp.open("POST",url,true);xmlHttp.setRequestHeader("Conent-Type","text/xml");xmlHttp.send(xmlText)}function copyResume(){if(xmlHttp.readyState==4){if(xmlHttp.status==200){if(xmlHttp.responseText.indexOf("error:")!=-1){alert(xmlHttp.responseText.split(":")[1])}else if(xmlHttp.responseText!="0"){var url=location.href;if(url.indexOf("?")>-1){url=url+"&r="+(new Date).getTime()}else{url=url+"?r="+(new Date).getTime()}location.href=url}}}}function bindBrowseCount(){var ids="";$("span.bcClass").each(function(){ids+=$(this).attr("id").replace("sp","")+","});if(ids!=""){ids=ids.substring(0,ids.length-1);$.getJSON("http://statistics.zp.58.com/resume/browsecount/get?ids="+ids+"&m=?",function(data){$.each(data,function(i,field){$("#sp"+field.id).text(field.count)})})}}function topOperateResult(operate,topNum,infoId,amount){window.location=window.location}function infotop(obj,infoid){var frm=$("#frm"+infoid);if(frm.length<1||infoid=="0"){alert("不能置顶");return}frm.bind("load",function(){changeIframeH()});if(frm.attr("visible").toString()=="false"){$(obj).parents("tr").next("tr").css("display","");$("iframe").attr("visible",false);$("iframe").css("height","0px");frm.attr("src","http://infotopweb.union.vip.58.com/infotopnet/trytop/"+infoid+"/1/0/");frm.attr("visible",true)}else{frm.attr("visible",false);frm.css("height","0px");$(obj).parents("tr").next("tr").css("display","none")}}function changeIframeH(){if(parent.document.getElementById("ContainerFrame")!=null){parent.document.getElementById("ContainerFrame").style.height=this.document.body.scrollHeight+"px"}}function initResumeList(){var ids="";$(".ifmdw").each(function(){var s=$(this).attr("id").replace("frm","");if(s!=""&&s!="0"){ids+=s+","}});if(ids!=""){ids=ids.substring(0,ids.length-1);var src=document.createElement("script");src.type="text/javascript";src.src="http://infotopweb.union.vip.58.com/infotopnet/gettopstatejs?m=setTopState&infoids="+ids;document.body.appendChild(src)}}function setTopState(infoid,topState,isCanTop){if(isCanTop){if(topState==1){topSuccess(infoid)}else if(topState==2){reserveTopSuccess(infoid)}}else{$("#topspan"+infoid).html("")}}function topSuccess(infoid){chgTopIcon(infoid,"ico ding","置顶中",1);$("#topspan"+infoid).html("置顶管理");$("#reflashspan"+infoid).addClass("defrsm");$("#reflashspan"+infoid).html("刷新");$("#ostatespan"+infoid).html("公开")}function reserveTopSuccess(infoid){chgTopIcon(infoid,"ico-w ding-w","委托置顶中",1);$("#topspan"+infoid).html("置顶管理")}function chgTopIcon(infoid,cls,tit,show){var sp=$("#ding_"+infoid);sp.attr("class",cls);sp.attr("title",tit);if(show){sp.show()}else{sp.hide()}}function closeDelResume(obj){$(obj).parents(".delconfirm").hide();layer_poped=false}function delResume(obj,infoId){$(".posrlt").css("z-index","");if(!layer_poped){$(obj).parent().css("z-index","1");var div=$(obj).siblings(".delconfirm");div.show();layer_poped=true}}function showResumeNumTips(obj){var div=$(obj).siblings("div[class^=limitWarn]");div.show();window.setTimeout(function(){div.hide()},2e3);return}function closeTopwarnmsg(obj){$(obj).parent().hide()}function cancelDefaultResume(obj,infoId,worktype){$.ajax({url:"http://jianli.58.com/ajax/setdefaultresume",data:{currentId:0,beforeId:infoId},type:"get",cache:false,dataType:"html",success:function(data){if(data>0){var div=$(obj).siblings("div[class^=ref]");div.find("span.fl").text("取消默认成功！");div.show();window.setTimeout(function(){div.hide()},1e3);$("a.drtip").each(function(){if($(this).attr("wt")==worktype){$(this).remove()}});$(obj).replaceWith('<a href="javascript:void(0);" onclick="javascript:setDefaultResume(this,\''+infoId+"','"+worktype+"')\">设为默认</a>")}}})}function setParentSetbgFun(a,b,c,d){if(typeof parent.setbg=="function"){parent.setbg(a,b,c,d)}else{setbg(a,b,c,d)}}function clickSend(type){var selectObj=JobTarjet.getSelectObj();var cateName=new StringBuffer;var cateIds=new StringBuffer;for(var i=0;i<selectObj.length;i++){var jsonObj=selectObj[i];cateName.append(jsonObj.name);cateIds.append(jsonObj.id);if(i!=selectObj.length-1){cateName.append(",");cateIds.append(",")}}var userid=GetCookieValue("UserID");cateName=encodeURI(cateName);var date=new Date;var now="";now=date.getFullYear()+"-";now=now+(date.getMonth()+1)+"-";now=now+date.getDate()+" ";now=now+date.getHours()+":";now=now+date.getMinutes()+":";now=now+date.getSeconds()+"";if(type==1){clickLog("from=zhaopin_jianli_my58_input_jxtx&qzcateid="+cateIds+"&qzcate="+cateName+"&datetime="+now+"&userid="+userid+"&rand="+Math.random())}else{clickLog("from=zhaopin_jianli_my58_input_yhtx&qzcateid="+cateIds+"&qzcate="+cateName+"&datetime="+now+"&userid="+userid+"&rand="+Math.random())}}function setDefaultResume(obj,infoId,worktype){var beforeId=0;var defrsmSpan;$("a.defaultresume").each(function(){var wt=$(this).attr("wt");if(wt==worktype){beforeId=$(this).attr("infoId");defrsmSpan=$(this)}});$.ajax({url:"http://jianli.58.com/ajax/setdefaultresume",data:{currentId:infoId,beforeId:beforeId},type:"get",cache:false,dataType:"html",success:function(data){if(data>0){var div=$(obj).siblings("div[class^=def]");div.find("span.fl").html("默认简历设置成功！<br>申请职位时可直接投递。");div.show();window.setTimeout(function(){div.hide()},2e3);$("a.drtip").each(function(){if($(this).attr("wt")==worktype){$(this).remove()}});var temp='<a href="javascript:void(0);" wt="'+worktype+'" class="drtip"><div class="drtpos"><span class="drttxt">该简历为默认投递简历，<br />申请职位时可直接投递。</span><span class="drtarrbg"></span></div></a>';$(obj).parents("tr").find("td.fricol div.posrlt").prepend(temp);$(".posrlt .drtip").hover(function(){$(this).find(".drtpos").show();$(this).parent().css({"z-index":"2"})},function(){$(this).find(".drtpos").hide();$(this).parent().css({"z-index":"1"})});if(defrsmSpan){defrsmSpan.replaceWith('<a href="javascript:void(0);" onclick="javascript:setDefaultResume(this,\''+beforeId+"','"+worktype+"')\">设为默认</a>")}$(obj).replaceWith('<a class="defaultresume" wt="'+worktype+'" infoId="'+infoId+'" href="javascript:void(0);" onclick="javascript:cancelDefaultResume(this,\''+infoId+"','"+worktype+"')\">取消默认</a>")}}})}function showNoteWin(type,rid){setParentSetbgFun("简历填写",400,200,"http://jianli.58.com/sltip/2?p="+type+"&ri="+rid,"true")}function clickSend(type,id){var cateIds=$("#cate"+id).val();var cateName=$("#cate"+id).attr("cname");var userid=GetCookieValue("UserID");cateName=encodeURI(cateName);var date=new Date;var now="";now=date.getFullYear()+"-";now=now+(date.getMonth()+1)+"-";now=now+date.getDate()+" ";now=now+date.getHours()+":";now=now+date.getMinutes()+":";now=now+date.getSeconds()+"";if(type==1){parent.clickLog("from=zhaopin_jianli_my58_guanli_jxtx&qzcateid="+cateIds+"&qzcate="+cateName+"&datetime="+now+"&userid="+userid+"&rand="+Math.random())}else{parent.clickLog("from=zhaopin_jianli_my58_guanli_yhtx&qzcateid="+cateIds+"&qzcate="+cateName+"&datetime="+now+"&userid="+userid+"&rand="+Math.random())}}function closeInfo(id){try{clickSend(2,id)}catch(err){}closeopendiv()}$(document).ready(function(){getFullPartInfo()});function getFullPartInfo(){if(typeof isHasPart!="undefined"&&!isHasPart){var isShowed=getCookie("risShowed");if(!isShowed){$.ajax({url:"http://jianli.58.com/ajax/getPartCount",data:{},type:"post",cache:false,dataType:"json",success:function(data){if(data.returnMessage=="success"){var entity=data.entity;if(entity!=null){$("#hideRSign").val(entity.sign);$("#hideRpid").val(entity.fullDisId);$("#hideRUid").val(entity.rid);$("#hideRpWkTp").val(entity.workFlag);$("#tpResumeTip").show();try{clickLog("from=jianli_post_partime_myshow")}catch(err){}}else{SetCookie("risShowed",0,"/")}}}})}}}function cancelCreate(){SetCookie("risShowed",1,"/");try{window.parent._gaq.push(["pageTracker._trackEvent","my","click","zhaopin_jineng_createPartResume_cancelFromMy"])}catch(err){}$("#tpResumeTip").hide()}function createPartResume(){try{clickLog("from=jianli_post_partime_myClickCreate")}catch(err){}var sign=$("#hideRSign").val();var fullDisId=$("#hideRpid").val();var hideRUid=$("#hideRUid").val();var hideRpWkTp=$("#hideRpWkTp").val();$.ajax({url:"http://jianli.58.com/ajax/cpPart/"+fullDisId+"/"+hideRUid,data:{s:sign,p:hideRpWkTp},type:"post",cache:false,dataType:"json",success:function(data){if(data.returnMessage=="success"){SetCookie("risShowed",0,"/");$("#tpResumeTip").hide();$("#ptResumeSuc").show();setTimeout(function(){location.reload()},1e3);return}else if(data.returnMessage=="failed"){alert("操作失败");return}else if(data.returnMessage=="notSelf"){alert("操作失败");return}else if(data.returnMessage=="hasPart"){$("#tpResumeTip").hide();$("#ptResumeSuc").show();setTimeout(function(){location.reload()},1e3);return}}});try{window.parent._gaq.push(["pageTracker._trackEvent","my","click","zhaopin_jineng_createPartResume_createFromMy"])}catch(err){}}function getCookie(name){var cookieArray=document.cookie.split(";");var cookie=new Object;for(var i=0;i<cookieArray.length;i++){var arr=cookieArray[i].split("=");if(arr[0]==name)return unescape(arr[1])}return""}function delCookie(name){document.cookie=name+"=;expires="+new Date(0).toGMTString()}function getCookie(objName){var arrStr=document.cookie.split("; ");for(var i=0;i<arrStr.length;i++){var temp=arrStr[i].split("=");if(temp[0]==objName)return unescape(temp[1])}}function addCookie(objName,objValue,objHours){var str=objName+"="+escape(objValue);if(objHours>0){var date=new Date;var ms=objHours*3600*1e3;date.setTime(date.getTime()+ms);str+="; expires="+date.toGMTString()}document.cookie=str}function SetCookie(name,value,path){var Days=15;var exp=new Date;exp.setTime(exp.getTime()+Days*24*60*60*1e3);document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()+";path="+path}function getCookie(name){var arr=document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));if(arr!=null)return unescape(arr[2]);return null}function delCookie(name){var exp=new Date;exp.setTime(exp.getTime()-1);var cval=getCookie(name)}function cancelDelegate(obj,rid,id){$.ajax({url:"http://jianli.58.com/ajax/cancelDelegate/"+rid+"/"+id,type:"post",cache:false,dataType:"json",success:function(data){var infos="取消委托投递成功!";if(data.returnMessage=="success"){}else if(data.returnMessage=="failed"){infos="操作失败"}var div=$(obj).parents("td").find("div[class^=ref]");div.find("span.fl").html(infos);div.show();changeView(obj,0,id,rid);window.setTimeout(function(){div.hide()},2e3)}})}function createDelegate(obj,rid){$.ajax({url:"http://jianli.58.com/ajax/createDelegate/"+rid,type:"post",cache:false,dataType:"json",success:function(data){var infos="委托投递设置成功！<br/>3天内有合适岗位自动投递。";if(data.returnMessage=="success"){}else if(data.returnMessage=="fail"){infos="操作失败"}var id=data.entity;var div=$(obj).siblings("div[class^=def]");div.find("span.fl").html(infos);div.show();changeView(obj,1,id,rid);window.setTimeout(function(){div.hide()},2e3)}})}function changeView(obj,type,id,rid){if(type==1){$("#deletedselected").replaceWith('<a class="red mar0 autoCreate" href="javascript:void(0);"  onclick="createDelegate(this,\''+rid+"')\">委托投递</a>");$(obj).replaceWith('<a class="red mar0 autoCreate" href="javascript:void(0);" id="deletedselected" onclick="cancelDelegate(this,\''+rid+"','"+id+"')\">取消委托</a>")}else{$(obj).replaceWith('<a class="red mar0 autoCreate" href="javascript:void(0);"  onclick="createDelegate(this,\''+rid+"')\">委托投递</a>")}}function closeTipReport(obj,recordid,rid,type){$.ajax({url:"http://jianli.58.com/ajax/deleteReportnotice?rid="+rid+"&type="+type+"&recordid="+recordid,type:"post",dataType:"html",success:function(data){if(data=="success"){$(obj).parent().parent().parent().empty()}}})}$(function(){var $prevAll=$(".xw-rz").prevAll(".bg1");var $prev=$prevAll.eq(0);$prev.addClass("xw-idf")});function rzSucess(){var clickLog=window.clickLog||parent.clickLog;clickLog&&clickLog("from=usercenter_phonetest_succeed");location.reload()}var goAuth=function(rid,mobile){var url;var clickLog=window.clickLog||parent&&parent.clickLog;clickLog&&clickLog("from=usercenter_immediatelycertification");url="http://jianli.58.com/delivery/showAuthWin/"+rid+"?mbl="+mobile+"&pathname="+encodeURIComponent(location.pathname);setbg("验证手机",300,400,url,"true");$("#blackcontentOuter").css("top","30%")};